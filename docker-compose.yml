version: '3'
services:
#  setup:
#    build: ./setup
#    environment:
#      - PYTHONUNBUFFERED=1
#    volumes:
#      - ./data:/app/data
#      - ./setup:/app/setup

  web:
    build: ./web
    ports:
      - "127.0.0.1:5000:5000"
    environment:
      - PYTHONUNBUFFERED=1
    volumes:
      - data-volume:/app/data
#    depends_on:
#      - setup

  bot:
    build: ./bot
    environment:
      - PYTHONUNBUFFERED=1
    volumes:
      - data-volume:/app/data
    depends_on:
      - web

volumes:
  data-volume: